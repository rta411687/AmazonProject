<!DOCTYPE html>
<html>
<head>
    <title>Super Admin Dashboard</title>
</head>
<body>
    <h1>Super Admin Dashboard</h1>

    <!-- Super Admin Wallet Section -->
    <h2>Super Admin Wallet</h2>
    {% if wallet %}
        <p><strong>Current Wallet Address:</strong> {{ wallet.address }}</p>
        <p><strong>Label:</strong> {{ wallet.label|default:"N/A" }}</p>
    {% else %}
        <p>No wallet set yet.</p>
    {% endif %}

    <form method="post">
        {% csrf_token %}
        <input type="hidden" name="action" value="wallet_create">

        <label>Wallet Address:</label><br>
        <input type="text" name="address" value="{{ wallet.address|default:'' }}" required><br><br>

        

        <button type="submit">{% if wallet %}Update Wallet{% else %}Create Wallet{% endif %}</button>
    </form>

    <hr>

    <!-- Create Admin / Customer Service -->
    <h2>Create Admin / Customer Service</h2>
    <form method="post">
        {% csrf_token %}
        <input type="hidden" name="action" value="create">

        <label>Username:</label><br>
        <input type="text" name="username" required><br><br>

        <label>Password:</label><br>
        <input type="password" name="password" required><br><br>

        <label>Role:</label><br>
        <select name="role" required>
            <option value="admin">Admin</option>
            <option value="customerservice">Customer Service</option>
        </select><br><br>

        <button type="submit">Create Account</button>
    </form>

    <hr>

    <!-- List and Manage Existing Admins / Customer Service -->
    <h2>Manage Existing Admins / Customer Service</h2>
    {% if admins_cs %}
        <table border="1" cellpadding="5">
            <tr>
                <th>Username</th>
                <th>Role</th>
                <th>Referral Code</th>
                <th>Actions</th>
            </tr>
            {% for user in admins_cs %}
            <tr>
                <td>{{ user.username }}</td>
                <td>{{ user.role }}</td>
                <td>
                    {% if user.role == 'admin' %}
                        {{ user.referral_code }}
                    {% else %}
                        N/A
                    {% endif %}
                </td>
                <td>
                    <!-- Delete -->
                    <form method="post" style="display:inline;">
                        {% csrf_token %}
                        <input type="hidden" name="user_id" value="{{ user.id }}">
                        <input type="hidden" name="action" value="delete">
                        <button type="submit">Delete</button>
                    </form>

                    <!-- Reset Password -->
                    <form method="post" style="display:inline;">
                        {% csrf_token %}
                        <input type="hidden" name="user_id" value="{{ user.id }}">
                        <input type="hidden" name="action" value="reset_password">
                        <input type="password" name="new_password" placeholder="New Password" required>
                        <button type="submit">Reset Password</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>No Admins or Customer Service accounts yet.</p>
    {% endif %}
</body>
</html>
